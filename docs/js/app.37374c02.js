(function(t){function e(e){for(var n,i,s=e[0],o=e[1],c=e[2],d=0,p=[];d<s.length;d++)i=s[d],r[i]&&p.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(p.length)p.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],n=!0,s=1;s<a.length;s++){var o=a[s];0!==r[o]&&(n=!1)}n&&(l.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},l=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=o;l.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),r=a("bb71");a("da64");n["a"].use(r["a"],{iconfont:"md"});var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-toolbar",[a("v-toolbar-title",{staticClass:"headline"},[t._v("\n            カレンダー検索\n        ")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{flat:""}},[a("router-link",{attrs:{to:"/"}},[a("i",{staticClass:"material-icons"},[t._v("home")])])],1)],1)],1),a("v-content",[a("router-view")],1),a("v-footer",{attrs:{dark:"",height:"auto"}},[a("v-card",{staticClass:"flex",attrs:{flat:"",tile:""}},[a("v-card-actions",{staticClass:"grey darken-3 justify-center my-5 text-xs-center"},[t._v("\n                Satoru Nakamura\n            ")])],1)],1)],1)},i=[],s=a("2877"),o=a("6544"),c=a.n(o),u=a("7496"),d=a("8336"),p=a("b0af"),h=a("99d9"),f=a("549c"),m=a("553a"),v=a("9910"),y=a("71d9"),b=a("2a7f"),g={},q=Object(s["a"])(g,l,i,!1,null,null,null),w=q.exports;c()(q,{VApp:u["a"],VBtn:d["a"],VCard:p["a"],VCardActions:h["a"],VContent:f["a"],VFooter:m["a"],VSpacer:v["a"],VToolbar:y["a"],VToolbarItems:b["a"],VToolbarTitle:b["b"]});var x=a("8c4f"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[a("v-container",{staticClass:"my-2"},[a("v-form",{ref:"form",staticClass:"mb-2"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{staticClass:"mx-2",attrs:{label:"キーワード / Keyword",name:"q"},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1)],1),a("v-btn",{attrs:{color:"primary"},on:{click:t.updatePath}},[a("i",{staticClass:"material-icons"},[t._v("search")])])],1),a("v-data-table",{staticClass:"elevation-1 mt-5",attrs:{items:t.items,"hide-actions":"","hide-headers":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("th",[t._v(t._s(e.item.year))]),t._l(12,function(n){return a("td",{staticClass:"text-xs-right"},[e.item.month[n-1]>0?a("router-link",{attrs:{to:{path:"list",query:{q:t.q,type:t.type,collection:t.collection,date:e.item.year+"-"+n}}}},[t._v(t._s(n)+"月 ("+t._s(e.item.month[n-1])+")")]):a("span",[t._v(t._s(n)+"月")])],1)})]}}])})],1)],1)],1)},k=[],C=a("dc09"),V=a("3cdd"),j=a.n(V),O=a("3e32"),D=a.n(O),P=a("a20c"),F=a.n(P),E=a("bc3a"),N=a.n(E);function T(t,e){var a=t.split(e);if(3!==a.length)return!1;const n=new Date(a[0],a[1]-1,a[2]);return a[0]===String(n.getFullYear())&&a[1]===("0"+(n.getMonth()+1)).slice(-2)&&a[2]===("0"+n.getDate()).slice(-2)}var S={components:{FullCalendar:C["a"]},data:function(){return{items:[],q:"",type:"Newspaper",type_array:["Newspaper"],types:[{value:"Newspaper",text:"新聞"},{value:"StillImage",text:"静止画資料"}],collection:"",collection_array:[],collections:[]}},watch:{$route(t,e){this.search()}},created:function(){let t=Object.assign({},this.$route.query);t.q&&(this.q=t.q),t.type&&(this.type=t.type,this.type_array=this.type.split(",")),t.collection&&(this.collection=t.collection,this.collection_array=this.collection.split(",")),this.search()},methods:{handleDateClick(t){window.open(t.event.id,"_blank")},updatePath(){this.type=this.type_array.join(","),this.collection=this.collection_array.join(","),this.$router.push({path:"",query:{q:this.q,type:this.type,collection:this.collection}})},search(){let t=" PREFIX dcterms: <http://purl.org/dc/terms/> \n";if(t+=" PREFIX dcndl: <http://ndl.go.jp/dcndl/terms/> \n",t+=" select distinct ?date count(distinct ?s) as ?c \n",t+=" WHERE { \n",t+=" ?s dcterms:date ?date . \n",this.type){let e=this.type.split(",");for(let a=0;a<e.length;a++)t+=" { ?s dcndl:materialType <http://ndl.go.jp/ndltype/"+e[a]+"> . } \n",a!=e.length-1&&(t+=" UNION \n")}if(this.collection){let e=this.collection.split(",");for(let a=0;a<e.length;a++)t+=" { ?s dcterms:isPartOf '"+e[a]+"'@ja . } \n",a!=e.length-1&&(t+=" UNION \n")}this.q&&(t+=" ?s ?p ?o . \n",t+=" ?o bif:contains '\""+this.q+"\"' . \n"),t+=" } order by desc(?date) \n",N.a.get("https://nakamura196.github.io/jpsearch/data/azumakagami/data.json").then(t=>{let e=t.data,a=[];this.items=a;var n=2e3,r=0,l={};for(let i=0;i<e.length;i++){let t=e[i],a=t["http://purl.org/dc/terms/date"][0]["@value"],s=t["http://purl.org/dc/terms/title"][0]["@value"];if(this.q&&-1==s.indexOf(this.q))continue;let o=Number(1);if(T(a,"-")){let t=a.split("-"),e=Number(t[0]);e<n&&(n=e),e>r&&(r=e);let i=Number(t[1]);l[e]||(l[e]={});let s=l[e];s[i]||(s[i]=0),s[i]+=o}}for(let i=n;i<=r;i++){let t={year:i,month:[]},e=l[i];for(let a=1;a<=12;a++){let n=null!=e&&e[a]?e[a]:0;t.month.push(n)}a.push(t)}}).catch(t=>{console.log(t)})}}},I=S,$=(a("ca9c"),a("a523")),M=a("8fea"),R=a("0e8f"),W=a("4bd4"),A=a("a722"),z=a("2677"),G=Object(s["a"])(I,_,k,!1,null,null,null),U=G.exports;c()(G,{VApp:u["a"],VBtn:d["a"],VContainer:$["a"],VContent:f["a"],VDataTable:M["a"],VFlex:R["a"],VForm:W["a"],VLayout:A["a"],VTextField:z["a"]});var X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[a("v-container",{staticClass:"my-2"},[a("v-form",{ref:"form",staticClass:"mb-2"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{staticClass:"mx-2",attrs:{label:"キーワード / Keyword",name:"q"},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1),a("v-btn",{attrs:{color:"primary"},on:{click:t.updatePath}},[a("i",{staticClass:"material-icons"},[t._v("search")])])],1)],1),a("FullCalendar",{ref:"fullCalendar",staticClass:"mt-5 demo-app-calendar",attrs:{defaultView:"dayGridMonth",header:{left:"prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},plugins:t.calendarPlugins,weekends:t.calendarWeekends,events:t.calendarEvents,defaultDate:t.defaultDate},on:{eventClick:t.handleDateClick}})],1)],1)],1)},B=[];function Y(t,e){var a=t.split(e);if(3!==a.length)return!1;const n=new Date(a[0],a[1]-1,a[2]);return a[0]===String(n.getFullYear())&&a[1]===("0"+(n.getMonth()+1)).slice(-2)&&a[2]===("0"+n.getDate()).slice(-2)}function H(t){let e=t.getFullYear(),a=t.getMonth()+1;return a=a<10?"0"+a:a,e+"-"+a}var J={components:{FullCalendar:C["a"]},data:function(){return{calendarPlugins:[j.a,D.a,F.a],calendarWeekends:!0,calendarEvents:[],defaultDate:new Date("1918-01"),q:"",type:"",collection:"",date:"1918-01",collection:""}},watch:{$route(t,e){this.search()}},created:function(){let t=Object.assign({},this.$route.query);t.q&&(this.q=t.q),t.type&&(this.type=t.type),t.collection&&(this.collection=t.collection),t.date&&(this.defaultDate=new Date(t.date),this.date=H(this.defaultDate)),this.search()},methods:{handleDateClick(t){window.open(t.event.id,"_blank")},updatePath(){this.defaultDate=new Date(this.date),this.$router.push({path:"list",query:{q:this.q,type:this.type,date:this.date,collection:this.collection}})},search(){this.calendarEvents=[];let t=" PREFIX dcterms: <http://purl.org/dc/terms/> \n";if(t+=" PREFIX dcndl: <http://ndl.go.jp/dcndl/terms/> \n",t+=" select distinct ?link ?date ?title \n",t+=" WHERE { \n",this.type){let e=this.type.split(",");for(let a=0;a<e.length;a++)t+=" { ?s dcndl:materialType <http://ndl.go.jp/ndltype/"+e[a]+"> . } \n",a!=e.length-1&&(t+=" UNION \n")}if(this.collection){let e=this.collection.split(",");for(let a=0;a<e.length;a++)t+=" { ?s dcterms:isPartOf '"+e[a]+"'@ja . } \n",a!=e.length-1&&(t+=" UNION \n")}t+=" ?s dcterms:date ?date . \n",t+=" ?date bif:contains '\""+this.date+"\"' . \n",t+=" ?s dcterms:title ?title . \n",t+=" ?s rdfs:seeAlso ?link . \n",this.q&&(t+=" ?s ?p ?o . \n",t+=" ?o bif:contains '\""+this.q+"\"' . \n"),t+=" } order by desc(?date) \n",N.a.get("https://nakamura196.github.io/jpsearch/data/azumakagami/data.json").then(t=>{let e=t.data,a=[];for(let n=0;n<e.length;n++){let t=e[n],r=t["http://purl.org/dc/terms/date"][0]["@value"],l=t["http://purl.org/dc/terms/title"][0]["@value"];if((!this.q||-1!=l.indexOf(this.q))&&Y(r,"-")){let e=new Date(r),n=(H(e),""),i=t["http://purl.org/dc/terms/relation"];if(i){let e=t["http://purl.org/dc/terms/isPartOf"][0]["@id"];n="https://tei-eaj.github.io/aozora_tei/tools/visualization/facs/?url="+e+"&textDirection=vertical&canvas="+i[0]["@id"]}a.push({title:l,start:r,id:n})}}this.calendarEvents=a}).catch(t=>{console.log(t)})}}},K=J,L=(a("abcb"),Object(s["a"])(K,X,B,!1,null,null,null)),Q=L.exports;c()(L,{VApp:u["a"],VBtn:d["a"],VContainer:$["a"],VContent:f["a"],VFlex:R["a"],VForm:W["a"],VLayout:A["a"],VTextField:z["a"]}),n["a"].use(x["a"]);var Z=new x["a"]({routes:[{path:"/",name:"index",component:U},{path:"/list",name:"list",component:Q}]});n["a"].config.productionTip=!1,new n["a"]({router:Z,render:function(t){return t(w)}}).$mount("#app")},"650b":function(t,e,a){},"9b5a":function(t,e,a){},abcb:function(t,e,a){"use strict";var n=a("9b5a"),r=a.n(n);r.a},ca9c:function(t,e,a){"use strict";var n=a("650b"),r=a.n(n);r.a}});
//# sourceMappingURL=app.37374c02.js.map